<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Joker&#39;s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://meandni.com/"/>
  <updated>2018-08-15T13:54:14.000Z</updated>
  <id>https://meandni.com/</id>
  
  <author>
    <name>Joker</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ReactNative-é›†æˆåˆ°ç°æœ‰åŸç”Ÿåº”ç”¨</title>
    <link href="https://meandni.com/2018/08/15/integration-with-existing-apps/"/>
    <id>https://meandni.com/2018/08/15/integration-with-existing-apps/</id>
    <published>2018-08-15T11:59:00.000Z</published>
    <updated>2018-08-15T13:54:14.000Z</updated>
    
    <content type="html"><![CDATA[<p>å¦‚æœä½ æ­£å‡†å¤‡ä»å¤´å¼€å§‹åˆ¶ä½œä¸€ä¸ªæ–°çš„åº”ç”¨ï¼Œé‚£ä¹ˆ React Native ä¼šæ˜¯ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚ä½†å¦‚æœä½ åªæƒ³ç»™ç°æœ‰çš„åŸç”Ÿåº”ç”¨ä¸­æ·»åŠ ä¸€ä¸¤ä¸ªè§†å›¾æˆ–æ˜¯ä¸šåŠ¡æµç¨‹ï¼ŒReact Native ä¹ŸåŒæ ·ä¸åœ¨è¯ä¸‹ã€‚åªéœ€ç®€å•å‡ æ­¥ï¼Œä½ å°±å¯ä»¥ç»™åŸæœ‰åº”ç”¨åŠ ä¸Šæ–°çš„åŸºäº React Native çš„ç‰¹æ€§ã€ç”»é¢å’Œè§†å›¾ç­‰ã€‚</p><p>å…·ä½“çš„æ­¥éª¤æ ¹æ®ä½ æ‰€å¼€å‘çš„ç›®æ ‡å¹³å°ä¸åŒè€Œä¸åŒã€‚</p><h2 id="æ ¸å¿ƒæ¦‚å¿µ"><a href="#æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="æ ¸å¿ƒæ¦‚å¿µ"></a>æ ¸å¿ƒæ¦‚å¿µ</h2><p>æŠŠ React Native ç»„ä»¶é›†æˆåˆ° Android åº”ç”¨ä¸­æœ‰å¦‚ä¸‹å‡ ä¸ªä¸»è¦æ­¥éª¤ï¼š</p><ol><li>é…ç½®å¥½ React Native ä¾èµ–å’Œé¡¹ç›®ç»“æ„ã€‚</li><li>åˆ›å»º js æ–‡ä»¶ï¼Œç¼–å†™ React Native ç»„ä»¶çš„ js ä»£ç ã€‚</li><li>åœ¨åº”ç”¨ä¸­æ·»åŠ ä¸€ä¸ª<code>RCTRootView</code>ã€‚è¿™ä¸ª<code>RCTRootView</code>æ­£æ˜¯ç”¨æ¥æ‰¿è½½ä½ çš„ React Native ç»„ä»¶çš„å®¹å™¨ã€‚</li><li>å¯åŠ¨ React Native çš„ Packager æœåŠ¡ï¼Œè¿è¡Œåº”ç”¨ã€‚</li><li>éªŒè¯è¿™éƒ¨åˆ†ç»„ä»¶æ˜¯å¦æ­£å¸¸å·¥ä½œã€‚</li></ol><h2 id="å¼€å‘ç¯å¢ƒå‡†å¤‡"><a href="#å¼€å‘ç¯å¢ƒå‡†å¤‡" class="headerlink" title="å¼€å‘ç¯å¢ƒå‡†å¤‡"></a>å¼€å‘ç¯å¢ƒå‡†å¤‡</h2><p>é¦–å…ˆæŒ‰ç…§<a href="getting-started.md">å¼€å‘ç¯å¢ƒæ­å»ºæ•™ç¨‹</a>æ¥å®‰è£… React Native åœ¨ Android å¹³å°ä¸Šæ‰€éœ€çš„ä¸€åˆ‡ä¾èµ–è½¯ä»¶ã€‚</p><h3 id="1-é…ç½®é¡¹ç›®ç›®å½•ç»“æ„"><a href="#1-é…ç½®é¡¹ç›®ç›®å½•ç»“æ„" class="headerlink" title="1. é…ç½®é¡¹ç›®ç›®å½•ç»“æ„"></a>1. é…ç½®é¡¹ç›®ç›®å½•ç»“æ„</h3><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªç©ºç›®å½•ç”¨äºå­˜æ”¾ React Native é¡¹ç›®ï¼Œç„¶ååœ¨å…¶ä¸­åˆ›å»ºä¸€ä¸ª<code>/android</code>å­ç›®å½•ï¼ŒæŠŠä½ ç°æœ‰çš„ Android é¡¹ç›®æ‹·è´åˆ°<code>/android</code>å­ç›®å½•ä¸­ã€‚</p><h3 id="2-å®‰è£…-JavaScript-ä¾èµ–åŒ…"><a href="#2-å®‰è£…-JavaScript-ä¾èµ–åŒ…" class="headerlink" title="2. å®‰è£… JavaScript ä¾èµ–åŒ…"></a>2. å®‰è£… JavaScript ä¾èµ–åŒ…</h3><p>åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸º<code>package.json</code>çš„ç©ºæ–‡æœ¬æ–‡ä»¶ï¼Œç„¶åå¡«å…¥ä»¥ä¸‹å†…å®¹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;MyReactNativeApp&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;0.0.1&quot;,</span><br><span class="line">  &quot;private&quot;: true,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;start&quot;: &quot;node node_modules/react-native/local-cli/cli.js start&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç¤ºä¾‹ä¸­çš„<code>version</code>å­—æ®µæ²¡æœ‰å¤ªå¤§æ„ä¹‰ï¼ˆé™¤éä½ è¦æŠŠä½ çš„é¡¹ç›®å‘å¸ƒåˆ° npm ä»“åº“ï¼‰ã€‚<code>scripts</code>ä¸­æ˜¯ç”¨äºå¯åŠ¨ packager æœåŠ¡çš„å‘½ä»¤ã€‚</p></blockquote><p>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ yarn æˆ– npmï¼ˆä¸¤è€…éƒ½æ˜¯ node çš„åŒ…ç®¡ç†å™¨ï¼‰æ¥å®‰è£… React å’Œ React Native æ¨¡å—ã€‚è¯·æ‰“å¼€ä¸€ä¸ªç»ˆç«¯/å‘½ä»¤æç¤ºè¡Œï¼Œè¿›å…¥åˆ°é¡¹ç›®ç›®å½•ä¸­ï¼ˆå³åŒ…å«æœ‰ package.json æ–‡ä»¶çš„ç›®å½•ï¼‰ï¼Œç„¶åè¿è¡Œä¸‹åˆ—å‘½ä»¤æ¥å®‰è£…ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add react-native</span><br></pre></td></tr></table></figure><p>è¿™æ ·é»˜è®¤ä¼šå®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ React Nativeï¼ŒåŒæ—¶ä¼šæ‰“å°å‡ºç±»ä¼¼ä¸‹é¢çš„è­¦å‘Šä¿¡æ¯ï¼ˆä½ å¯èƒ½éœ€è¦æ»šåŠ¨å±å¹•æ‰èƒ½æ³¨æ„åˆ°ï¼‰ï¼š</p><blockquote><p>warning â€œ<a href="mailto:react-native@0.52.2" target="_blank" rel="noopener">react-native@0.52.2</a>â€œ has unmet peer dependency â€œ<a href="mailto:react@16.2.0" target="_blank" rel="noopener">react@16.2.0</a>â€œ.</p></blockquote><p>è¿™æ˜¯æ­£å¸¸ç°è±¡ï¼Œæ„å‘³ç€æˆ‘ä»¬è¿˜éœ€è¦å®‰è£…æŒ‡å®šç‰ˆæœ¬çš„ Reactï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn add react@16.2.0</span><br></pre></td></tr></table></figure><p>æ³¨æ„å¿…é¡»ä¸¥æ ¼åŒ¹é…è­¦å‘Šä¿¡æ¯ä¸­æ‰€åˆ—å‡ºçš„ç‰ˆæœ¬ï¼Œé«˜äº†æˆ–è€…ä½äº†éƒ½ä¸å¯ä»¥ã€‚</p><blockquote><p>å¦‚æœä½ ä½¿ç”¨å¤šä¸ªç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œå¯èƒ½è¿™äº›ç¬¬ä¸‰æ–¹å„è‡ªè¦æ±‚çš„ react ç‰ˆæœ¬æœ‰æ‰€å†²çªï¼Œæ­¤æ—¶åº”ä¼˜å…ˆæ»¡è¶³<code>react-native</code>æ‰€éœ€è¦çš„<code>react</code>ç‰ˆæœ¬ã€‚å…¶ä»–ç¬¬ä¸‰æ–¹èƒ½ç”¨åˆ™ç”¨ï¼Œä¸èƒ½ç”¨åˆ™åªèƒ½è€ƒè™‘é€‰æ‹©å…¶ä»–åº“ã€‚</p></blockquote><p>æ‰€æœ‰ JavaScript ä¾èµ–æ¨¡å—éƒ½ä¼šè¢«å®‰è£…åˆ°é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„<code>node_modules/</code>ç›®å½•ä¸­ï¼ˆè¿™ä¸ªç›®å½•æˆ‘ä»¬åŸåˆ™ä¸Šä¸å¤åˆ¶ã€ä¸ç§»åŠ¨ã€ä¸ä¿®æ”¹ã€ä¸ä¸Šä¼ ï¼Œéšç”¨éšè£…ï¼‰ã€‚</p><p>æŠŠ<code>node_modules/</code>ç›®å½•è®°å½•åˆ°<code>.gitignore</code>æ–‡ä»¶ä¸­ï¼ˆå³ä¸ä¸Šä¼ åˆ°ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼Œåªä¿ç•™åœ¨æœ¬åœ°ï¼‰ã€‚</p><h2 id="æŠŠ-React-Native-æ·»åŠ åˆ°ä½ çš„åº”ç”¨ä¸­"><a href="#æŠŠ-React-Native-æ·»åŠ åˆ°ä½ çš„åº”ç”¨ä¸­" class="headerlink" title="æŠŠ React Native æ·»åŠ åˆ°ä½ çš„åº”ç”¨ä¸­"></a>æŠŠ React Native æ·»åŠ åˆ°ä½ çš„åº”ç”¨ä¸­</h2><h3 id="é…ç½®-maven"><a href="#é…ç½®-maven" class="headerlink" title="é…ç½® maven"></a>é…ç½® maven</h3><p>åœ¨ä½ çš„ app ä¸­ <code>build.gradle</code> æ–‡ä»¶ä¸­æ·»åŠ  React Native ä¾èµ–:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line">    compile &apos;com.android.support:appcompat-v7:23.0.1&apos;</span><br><span class="line">    ...</span><br><span class="line">    compile &quot;com.facebook.react:react-native:+&quot; // From node_modules</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>å¦‚æœæƒ³è¦æŒ‡å®šç‰¹å®šçš„ React Native ç‰ˆæœ¬ï¼Œå¯ä»¥ç”¨å…·ä½“çš„ç‰ˆæœ¬å·æ›¿æ¢ <code>+</code>ï¼Œå½“ç„¶å‰ææ˜¯ä½ ä» npm é‡Œä¸‹è½½çš„æ˜¯è¿™ä¸ªç‰ˆæœ¬ã€‚</p></blockquote><p>åœ¨é¡¹ç›®çš„ <code>build.gradle</code> æ–‡ä»¶ä¸­ä¸º React Native æ·»åŠ ä¸€ä¸ª maven ä¾èµ–çš„å…¥å£ï¼Œå¿…é¡»å†™åœ¨ â€œallprojectsâ€ ä»£ç å—ä¸­:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">allprojects &#123;</span><br><span class="line">    repositories &#123;</span><br><span class="line">        maven &#123;</span><br><span class="line">            // All of React Native (JS, Android binaries) is installed from npm</span><br><span class="line">            url &quot;$rootDir/../node_modules/react-native/android&quot;</span><br><span class="line">        &#125;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>ç¡®ä¿ä¾èµ–è·¯å¾„çš„æ­£ç¡®ï¼ä»¥å…åœ¨ Android Studio è¿è¡Œ Gradle åŒæ­¥æ„å»ºæ—¶æŠ›å‡º â€œFailed to resolve: com.facebook.react:react-native:0.x.xâ€ å¼‚å¸¸ã€‚</p></blockquote><h3 id="é…ç½®æƒé™"><a href="#é…ç½®æƒé™" class="headerlink" title="é…ç½®æƒé™"></a>é…ç½®æƒé™</h3><p>æ¥ç€ï¼Œåœ¨ <code>AndroidManifest.xml</code> æ¸…å•æ–‡ä»¶ä¸­å£°æ˜ç½‘ç»œæƒé™:</p><pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;</code></pre><p>å¦‚æœéœ€è¦è®¿é—® <code>DevSettingsActivity</code> ç•Œé¢ï¼ˆå³å¼€å‘è€…èœå•ï¼‰ï¼Œåˆ™è¿˜éœ€è¦åœ¨ <code>AndroidManifest.xml</code> ä¸­å£°æ˜:</p><pre><code>&lt;activity android:name=&quot;com.facebook.react.devsupport.DevSettingsActivity&quot; /&gt;</code></pre><p>å¼€å‘è€…èœå•ä¸€èˆ¬ä»…ç”¨äºåœ¨å¼€å‘æ—¶ä» Packager æœåŠ¡å™¨åˆ·æ–° JavaScript ä»£ç ï¼Œæ‰€ä»¥åœ¨æ­£å¼å‘å¸ƒæ—¶ä½ å¯ä»¥å»æ‰è¿™ä¸€æƒé™ã€‚</p><h3 id="ä»£ç é›†æˆ"><a href="#ä»£ç é›†æˆ" class="headerlink" title="ä»£ç é›†æˆ"></a>ä»£ç é›†æˆ</h3><p>Now we will actually modify the native Android application to integrate React Native.</p><h4 id="React-Native-ç»„ä»¶"><a href="#React-Native-ç»„ä»¶" class="headerlink" title="React Native ç»„ä»¶"></a>React Native ç»„ä»¶</h4><p>æˆ‘ä»¬é¦–å…ˆè¦å†™çš„æ˜¯â€High Scoreâ€ï¼ˆå¾—åˆ†æ’è¡Œæ¦œï¼‰çš„ JavaScript ç«¯çš„ä»£ç ã€‚</p><h5 id="1-åˆ›å»ºä¸€ä¸ªindex-jsæ–‡ä»¶"><a href="#1-åˆ›å»ºä¸€ä¸ªindex-jsæ–‡ä»¶" class="headerlink" title="1. åˆ›å»ºä¸€ä¸ªindex.jsæ–‡ä»¶"></a>1. åˆ›å»ºä¸€ä¸ª<code>index.js</code>æ–‡ä»¶</h5><p>é¦–å…ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªç©ºçš„<code>index.js</code>æ–‡ä»¶ã€‚(æ³¨æ„åœ¨ 0.49 ç‰ˆæœ¬ä¹‹å‰æ˜¯ index.android.js æ–‡ä»¶)</p><p><code>index.js</code>æ˜¯ React Native åº”ç”¨åœ¨ Android ä¸Šçš„å…¥å£æ–‡ä»¶ã€‚è€Œä¸”å®ƒæ˜¯ä¸å¯æˆ–ç¼ºçš„ï¼å®ƒå¯ä»¥æ˜¯ä¸ªå¾ˆç®€å•çš„æ–‡ä»¶ï¼Œç®€å•åˆ°å¯ä»¥åªåŒ…å«ä¸€è¡Œ<code>require/import</code>å¯¼å…¥è¯­å¥ã€‚æœ¬æ•™ç¨‹ä¸­ä¸ºäº†ç®€å•ç¤ºèŒƒï¼ŒæŠŠå…¨éƒ¨çš„ä»£ç éƒ½å†™åˆ°äº†<code>index.js</code>é‡Œï¼ˆå½“ç„¶å®é™…å¼€å‘ä¸­æˆ‘ä»¬å¹¶ä¸æ¨èè¿™æ ·åšï¼‰ã€‚</p><h5 id="2-æ·»åŠ ä½ è‡ªå·±çš„-React-Native-ä»£ç "><a href="#2-æ·»åŠ ä½ è‡ªå·±çš„-React-Native-ä»£ç " class="headerlink" title="2. æ·»åŠ ä½ è‡ªå·±çš„ React Native ä»£ç "></a>2. æ·»åŠ ä½ è‡ªå·±çš„ React Native ä»£ç </h5><p>åœ¨<code>index.js</code>ä¸­æ·»åŠ ä½ è‡ªå·±çš„ç»„ä»¶ã€‚è¿™é‡Œæˆ‘ä»¬åªæ˜¯ç®€å•çš„æ·»åŠ ä¸€ä¸ª<code>&lt;Text&gt;</code>ç»„ä»¶ï¼Œç„¶åç”¨ä¸€ä¸ªå¸¦æœ‰æ ·å¼çš„<code>&lt;View&gt;</code>ç»„ä»¶æŠŠå®ƒåŒ…èµ·æ¥ã€‚</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; AppRegistry, StyleSheet, Text, View &#125; <span class="keyword">from</span> <span class="string">"react-native"</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;View style=&#123;styles.container&#125;&gt;</span><br><span class="line">        &lt;Text style=&#123;styles.hello&#125;&gt;Hello, World&lt;<span class="regexp">/Text&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>View&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> styles = StyleSheet.create(&#123;</span><br><span class="line">  container: &#123;</span><br><span class="line">    flex: <span class="number">1</span>,</span><br><span class="line">    justifyContent: <span class="string">"center"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  hello: &#123;</span><br><span class="line">    fontSize: <span class="number">20</span>,</span><br><span class="line">    textAlign: <span class="string">"center"</span>,</span><br><span class="line">    margin: <span class="number">10</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">AppRegistry.registerComponent(<span class="string">"MyReactNativeApp"</span>, () =&gt; HelloWorld);</span><br></pre></td></tr></table></figure><h5 id="3-é…ç½®æƒé™ä»¥ä¾¿å¼€å‘ä¸­çš„çº¢å±é”™è¯¯èƒ½æ­£ç¡®æ˜¾ç¤º"><a href="#3-é…ç½®æƒé™ä»¥ä¾¿å¼€å‘ä¸­çš„çº¢å±é”™è¯¯èƒ½æ­£ç¡®æ˜¾ç¤º" class="headerlink" title="3. é…ç½®æƒé™ä»¥ä¾¿å¼€å‘ä¸­çš„çº¢å±é”™è¯¯èƒ½æ­£ç¡®æ˜¾ç¤º"></a>3. é…ç½®æƒé™ä»¥ä¾¿å¼€å‘ä¸­çš„çº¢å±é”™è¯¯èƒ½æ­£ç¡®æ˜¾ç¤º</h5><p>å¦‚æœä½ çš„åº”ç”¨ä¼šè¿è¡Œåœ¨ Android 6.0ï¼ˆAPI level 23ï¼‰æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œè¯·ç¡®ä¿ä½ åœ¨å¼€å‘ç‰ˆæœ¬ä¸­æœ‰æ‰“å¼€<code>æ‚¬æµ®çª—(overlay)</code>æƒé™ã€‚ä½ å¯ä»¥åœ¨ä»£ç ä¸­ä½¿ç”¨<code>Settings.canDrawOverlays(this);</code>æ¥æ£€æŸ¥ã€‚ä¹‹æ‰€ä»¥éœ€è¦è¿™ä¸€æƒé™ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬ä¼šæŠŠå¼€å‘ä¸­çš„æŠ¥é”™æ˜¾ç¤ºåœ¨æ‚¬æµ®çª—ä¸­ï¼ˆä»…åœ¨å¼€å‘é˜¶æ®µéœ€è¦ï¼‰ã€‚åœ¨ Android 6.0ï¼ˆAPI level 23ï¼‰ä¸­ç”¨æˆ·éœ€è¦æ‰‹åŠ¨åŒæ„æˆæƒã€‚å…·ä½“è¯·æ±‚æˆæƒçš„åšæ³•æ˜¯åœ¨<code>onCreate()</code>ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ã€‚å…¶ä¸­<code>OVERLAY_PERMISSION_REQ_CODE</code>æ˜¯ç”¨äºå›ä¼ æˆæƒç»“æœçš„å­—æ®µã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> OVERLAY_PERMISSION_REQ_CODE = <span class="number">1</span>;  <span class="comment">// ä»»å†™ä¸€ä¸ªå€¼</span></span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!Settings.canDrawOverlays(<span class="keyword">this</span>)) &#123;</span><br><span class="line">        Intent intent = <span class="keyword">new</span> Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION,</span><br><span class="line">                                   Uri.parse(<span class="string">"package:"</span> + getPackageName()));</span><br><span class="line">        startActivityForResult(intent, OVERLAY_PERMISSION_REQ_CODE);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Finally, the <code>onActivityResult()</code> method (as shown in the code below) has to be overridden to handle the permission Accepted or Denied cases for consistent UX.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (requestCode == OVERLAY_PERMISSION_REQ_CODE) &#123;</span><br><span class="line">        <span class="keyword">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!Settings.canDrawOverlays(<span class="keyword">this</span>)) &#123;</span><br><span class="line">                <span class="comment">// SYSTEM_ALERT_WINDOW permission not granted</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="æŒæ¡æ ¸å¿ƒç§‘æŠ€ï¼šReactRootView"><a href="#æŒæ¡æ ¸å¿ƒç§‘æŠ€ï¼šReactRootView" class="headerlink" title="æŒæ¡æ ¸å¿ƒç§‘æŠ€ï¼šReactRootView"></a>æŒæ¡æ ¸å¿ƒç§‘æŠ€ï¼š<code>ReactRootView</code></h4><p>æˆ‘ä»¬è¿˜éœ€è¦æ·»åŠ ä¸€äº›åŸç”Ÿä»£ç æ¥å¯åŠ¨ React Native çš„è¿è¡Œæ—¶ç¯å¢ƒå¹¶è®©å®ƒå¼€å§‹æ¸²æŸ“ã€‚é¦–å…ˆéœ€è¦åœ¨ä¸€ä¸ª<code>Activity</code>ä¸­åˆ›å»ºä¸€ä¸ª<code>ReactRootView</code>å¯¹è±¡ï¼Œç„¶ååœ¨è¿™ä¸ªå¯¹è±¡ä¹‹ä¸­å¯åŠ¨ React Native åº”ç”¨ï¼Œå¹¶å°†å®ƒè®¾ä¸ºç•Œé¢çš„ä¸»è§†å›¾ã€‚</p><blockquote><p>å¦‚æœä½ æƒ³åœ¨å®‰å“ 5.0 ä»¥ä¸‹çš„ç³»ç»Ÿä¸Šè¿è¡Œï¼Œè¯·ç”¨ <code>com.android.support:appcompat</code> åŒ…ä¸­çš„ <code>AppCompatActivity</code> ä»£æ›¿ <code>Activity</code> ã€‚</p></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyReactActivity</span> <span class="keyword">extends</span> <span class="title">Activity</span> <span class="keyword">implements</span> <span class="title">DefaultHardwareBackBtnHandler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ReactRootView mReactRootView;</span><br><span class="line">    <span class="keyword">private</span> ReactInstanceManager mReactInstanceManager;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onCreate(savedInstanceState);</span><br><span class="line"></span><br><span class="line">        mReactRootView = <span class="keyword">new</span> ReactRootView(<span class="keyword">this</span>);</span><br><span class="line">        mReactInstanceManager = ReactInstanceManager.builder()</span><br><span class="line">                .setApplication(getApplication())</span><br><span class="line">                .setBundleAssetName(<span class="string">"index.android.bundle"</span>)</span><br><span class="line">                .setJSMainModulePath(<span class="string">"index"</span>)</span><br><span class="line">                .addPackage(<span class="keyword">new</span> MainReactPackage())</span><br><span class="line">                .setUseDeveloperSupport(BuildConfig.DEBUG)</span><br><span class="line">                .setInitialLifecycleState(LifecycleState.RESUMED)</span><br><span class="line">                .build();</span><br><span class="line">        <span class="comment">// æ³¨æ„è¿™é‡Œçš„MyReactNativeAppå¿…é¡»å¯¹åº”â€œindex.jsâ€ä¸­çš„</span></span><br><span class="line">        <span class="comment">// â€œAppRegistry.registerComponent()â€çš„ç¬¬ä¸€ä¸ªå‚æ•°</span></span><br><span class="line">        mReactRootView.startReactApplication(mReactInstanceManager, <span class="string">"MyReactNativeApp"</span>, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">        setContentView(mReactRootView);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">invokeDefaultOnBackPressed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>.onBackPressed();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>If you are using a starter kit for React Native, replace the â€œHelloWorldâ€ string with the one in your index.js file (itâ€™s the first argument to the <code>AppRegistry.registerComponent()</code> method).</p></blockquote><p>å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ Android Studio , å¯ä»¥ä½¿ç”¨<code>Alt + Enter</code>å¿«æ·é”®æ¥è‡ªåŠ¨ä¸º MyReactActivity ç±»è¡¥ä¸Šç¼ºå¤±çš„ import è¯­å¥ã€‚æ³¨æ„<code>BuildConfig</code>åº”è¯¥æ˜¯åœ¨ä½ è‡ªå·±çš„åŒ…ä¸­è‡ªåŠ¨ç”Ÿæˆï¼Œæ— éœ€é¢å¤–å¼•å…¥ã€‚åƒä¸‡ä¸è¦ä»<code>com.facebook...</code>çš„åŒ…ä¸­å¼•å…¥ï¼</p><p>æˆ‘ä»¬éœ€è¦æŠŠ <code>MyReactActivity</code> çš„ä¸»é¢˜è®¾å®šä¸º <code>Theme.AppCompat.Light.NoActionBar</code> ï¼Œå› ä¸ºé‡Œé¢æœ‰è®¸å¤šç»„ä»¶éƒ½ä½¿ç”¨äº†è¿™ä¸€ä¸»é¢˜ã€‚</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activity</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:name</span>=<span class="string">".MyReactActivity"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:label</span>=<span class="string">"@string/app_name"</span></span></span><br><span class="line"><span class="tag">  <span class="attr">android:theme</span>=<span class="string">"@style/Theme.AppCompat.Light.NoActionBar"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>ä¸€ä¸ª<code>ReactInstanceManager</code>å¯ä»¥åœ¨å¤šä¸ª activities æˆ– fragments é—´å…±äº«ã€‚ You will want to make your own <code>ReactFragment</code> or <code>ReactActivity</code> and have a singleton <em>holder</em> that holds a <code>ReactInstanceManager</code>. When you need the <code>ReactInstanceManager</code> (e.g., to hook up the <code>ReactInstanceManager</code> to the lifecycle of those Activities or Fragments) use the one provided by the singleton.</p></blockquote><p>ä¸‹ä¸€æ­¥æˆ‘ä»¬éœ€è¦æŠŠä¸€äº› activity çš„ç”Ÿå‘½å‘¨æœŸå›è°ƒä¼ é€’ç»™<code>ReactInstanceManager</code>ï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onPause</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onPause();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (mReactInstanceManager != <span class="keyword">null</span>) &#123;</span><br><span class="line">        mReactInstanceManager.onHostPause(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onResume</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onResume();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (mReactInstanceManager != <span class="keyword">null</span>) &#123;</span><br><span class="line">        mReactInstanceManager.onHostResume(<span class="keyword">this</span>, <span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onDestroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">super</span>.onDestroy();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (mReactInstanceManager != <span class="keyword">null</span>) &#123;</span><br><span class="line">        mReactInstanceManager.onHostDestroy(<span class="keyword">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (mReactRootView != <span class="keyword">null</span>) &#123;</span><br><span class="line">        mReactRootView.unmountReactApplication();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿˜éœ€è¦æŠŠåé€€æŒ‰é’®äº‹ä»¶ä¼ é€’ç»™ React Nativeï¼š</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">onBackPressed</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (mReactInstanceManager != <span class="keyword">null</span>) &#123;</span><br><span class="line">        mReactInstanceManager.onBackPressed();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onBackPressed();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>This allows JavaScript to control what happens when the user presses the hardware back button (e.g. to implement navigation). When JavaScript doesnâ€™t handle the back button press, your <code>invokeDefaultOnBackPressed</code> method will be called. By default this simply finishes your <code>Activity</code>.</p><p>Finally, we need to hook up the dev menu. By default, this is activated by (rage) shaking the device, but this is not very useful in emulators. So we make it show when you press the hardware menu button (use <code>Ctrl + M</code> if youâ€™re using Android Studio emulator):</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onKeyUp</span><span class="params">(<span class="keyword">int</span> keyCode, KeyEvent event)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (keyCode == KeyEvent.KEYCODE_MENU &amp;&amp; mReactInstanceManager != <span class="keyword">null</span>) &#123;</span><br><span class="line">        mReactInstanceManager.showDevOptionsDialog();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">super</span>.onKeyUp(keyCode, event);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç°åœ¨ activity å·²å°±ç»ªï¼Œå¯ä»¥è¿è¡Œä¸€äº› JavaScript ä»£ç äº†ã€‚</p><h3 id="æµ‹è¯•é›†æˆç»“æœ"><a href="#æµ‹è¯•é›†æˆç»“æœ" class="headerlink" title="æµ‹è¯•é›†æˆç»“æœ"></a>æµ‹è¯•é›†æˆç»“æœ</h3><p>You have now done all the basic steps to integrate React Native with your current application. Now we will start the React Native packager to build the <code>index.bundle</code> package and the server running on localhost to serve it.</p><h5 id="1-è¿è¡Œ-Packager"><a href="#1-è¿è¡Œ-Packager" class="headerlink" title="1. è¿è¡Œ Packager"></a>1. è¿è¡Œ Packager</h5><p>è¿è¡Œåº”ç”¨é¦–å…ˆéœ€è¦å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆPackagerï¼‰ã€‚ä½ åªéœ€åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ yarn start</span><br></pre></td></tr></table></figure><h5 id="2-è¿è¡Œä½ çš„åº”ç”¨"><a href="#2-è¿è¡Œä½ çš„åº”ç”¨" class="headerlink" title="2. è¿è¡Œä½ çš„åº”ç”¨"></a>2. è¿è¡Œä½ çš„åº”ç”¨</h5><p>ä¿æŒ packager çš„çª—å£è¿è¡Œä¸è¦å…³é—­ï¼Œç„¶ååƒå¾€å¸¸ä¸€æ ·ç¼–è¯‘è¿è¡Œä½ çš„ Android åº”ç”¨(åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œ<code>./gradlew installDebug</code>æˆ–æ˜¯åœ¨ Android Studio ä¸­ç¼–è¯‘è¿è¡Œ)ã€‚</p><p>ç¼–è¯‘æ‰§è¡Œä¸€åˆ‡é¡ºåˆ©è¿›è¡Œä¹‹åï¼Œåœ¨è¿›å…¥åˆ° MyReactActivity æ—¶åº”è¯¥å°±èƒ½ç«‹åˆ»ä» packager ä¸­è¯»å– JavaScript ä»£ç å¹¶æ‰§è¡Œå’Œæ˜¾ç¤ºï¼š</p><figure class="image-bubble">                <div class="img-lightbox">                    <div class="overlay"></div>                    <img src="assets/EmbeddedAppAndroid.png" alt="Screenshot" title="">                </div>                <div class="image-caption">Screenshot</div>            </figure><h3 id="åœ¨-Android-Studio-ä¸­æ‰“åŒ…"><a href="#åœ¨-Android-Studio-ä¸­æ‰“åŒ…" class="headerlink" title="åœ¨ Android Studio ä¸­æ‰“åŒ…"></a>åœ¨ Android Studio ä¸­æ‰“åŒ…</h3><p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Android Studio æ¥æ‰“ release åŒ…ï¼å…¶æ­¥éª¤åŸºæœ¬å’ŒåŸç”Ÿåº”ç”¨ä¸€æ ·ï¼Œåªæ˜¯åœ¨æ¯æ¬¡ç¼–è¯‘æ‰“åŒ…ä¹‹å‰éœ€è¦å…ˆæ‰§è¡Œ js æ–‡ä»¶çš„æ‰“åŒ…(å³ç”Ÿæˆç¦»çº¿çš„ jsbundle æ–‡ä»¶)ã€‚å…·ä½“çš„ js æ‰“åŒ…å‘½ä»¤å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ react-native bundle --platform android --dev false --entry-file index.js --bundle-output android/com/your-company-name/app-package-name/src/main/assets/index.android.bundle --assets-dest android/com/your-company-name/app-package-name/src/main/res/</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„æŠŠä¸Šè¿°å‘½ä»¤ä¸­çš„è·¯å¾„æ›¿æ¢ä¸ºä½ å®é™…é¡¹ç›®çš„è·¯å¾„ã€‚å¦‚æœ assets ç›®å½•ä¸å­˜åœ¨ï¼Œåˆ™éœ€è¦æå‰è‡ªå·±åˆ›å»ºä¸€ä¸ªã€‚</p></blockquote><p>ç„¶ååœ¨ Android Studio ä¸­æ­£å¸¸ç”Ÿæˆ release ç‰ˆæœ¬å³å¯ï¼</p><block class="objc swift android"><h3 id="ç„¶åå‘¢ï¼Ÿ"><a href="#ç„¶åå‘¢ï¼Ÿ" class="headerlink" title="ç„¶åå‘¢ï¼Ÿ"></a>ç„¶åå‘¢ï¼Ÿ</h3><p>ç„¶åå°±å¯ä»¥å¼€å‘å•¦~å¯æ˜¯æˆ‘å®Œå…¨ä¸ä¼š React Native æ€ä¹ˆåŠï¼Ÿ</p></block>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;å¦‚æœä½ æ­£å‡†å¤‡ä»å¤´å¼€å§‹åˆ¶ä½œä¸€ä¸ªæ–°çš„åº”ç”¨ï¼Œé‚£ä¹ˆ React Native ä¼šæ˜¯ä¸ªéå¸¸å¥½çš„é€‰æ‹©ã€‚ä½†å¦‚æœä½ åªæƒ³ç»™ç°æœ‰çš„åŸç”Ÿåº”ç”¨ä¸­æ·»åŠ ä¸€ä¸¤ä¸ªè§†å›¾æˆ–æ˜¯ä¸šåŠ¡æµç¨‹ï¼ŒReact Native ä¹ŸåŒæ ·ä¸åœ¨è¯ä¸‹ã€‚åªéœ€ç®€å•å‡ æ­¥ï¼Œä½ å°±å¯ä»¥ç»™åŸæœ‰åº”ç”¨åŠ ä¸Šæ–°çš„åŸºäº React Native çš„ç‰¹æ€§ã€ç”»é¢
      
    
    </summary>
    
      <category term="éåŸåˆ›" scheme="https://meandni.com/categories/%E9%9D%9E%E5%8E%9F%E5%88%9B/"/>
    
    
      <category term="android" scheme="https://meandni.com/tags/android/"/>
    
      <category term="æ··åˆå¼€å‘" scheme="https://meandni.com/tags/%E6%B7%B7%E5%90%88%E5%BC%80%E5%8F%91/"/>
    
      <category term="reactnative" scheme="https://meandni.com/tags/reactnative/"/>
    
  </entry>
  
  <entry>
    <title>çœ‹ã€Šç¬¬ä¸€è¡Œä»£ç ã€‹ï¼ˆAndroudï¼‰</title>
    <link href="https://meandni.com/2018/08/14/b62/"/>
    <id>https://meandni.com/2018/08/14/b62/</id>
    <published>2018-08-14T14:21:00.000Z</published>
    <updated>2018-08-15T14:07:32.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="è¯»ä¹¦æ„Ÿå—"><a href="#è¯»ä¹¦æ„Ÿå—" class="headerlink" title="è¯»ä¹¦æ„Ÿå—"></a>è¯»ä¹¦æ„Ÿå—</h2><p>æœ¬ç€æŸ¥æ¼è¡¥ç¼ºçš„æ€åº¦ï¼Œåˆšæ¥å­¦æ ¡éšæ‰‹æ‹¿åˆ°ä¸€æœ¬ä¹¦çœ‹äº†èµ·æ¥ï¼Œå°±è¿™ä¹ˆä¸€ä¸‹å­çœ‹å®Œäº†ï¼Œæœ‰ä¸€ä¸ªæ„Ÿè§‰ï¼ŒæŠ€æœ¯ä¹‹ç±»çš„ä¹¦è¿˜è¦æ˜¯æœ‰ç‚¹åŸºç¡€çœ‹çš„ï¼Œä¸ä»…æ•ˆç‡é«˜è€Œä¸”è·ç›Šç¡®å®ä¸å°‘ã€‚</p><p>ä¹Ÿæ²¡æœ‰éƒ½çœ‹ï¼Œå‰é¢å·²ç»æ¥è§¦å¤ªå¤šçš„ä¸œè¥¿å°±æ²¡å»çœ‹äº†ï¼Œå¤§æ¦‚ä»¥åè¿˜ä¼šå½“å·¥å…·ä¹¦æ¥ç¿»ä¸€ç¿»ï¼Œä¸»è¦æ˜¯ä»æˆ‘ä¹‹å‰æ²¡æ¥è§¦çš„å¹¿æ’­çœ‹èµ·ï¼Œçœ‹ç€çœ‹ç€å‘ç°ä¹‹å‰ä¸ä¼šçš„ä¸œè¥¿å±…ç„¶æŒæ¡äº†ï¼Œç€å®è®©æˆ‘å€æ„Ÿè‡ªä¿¡ï¼Œæœ‰äº†ç»§ç»­çœ‹çš„åŠ¨åŠ›ï¼ŒåŠ ä¸Šæ‰‹å¤´æ­£åœ¨åšä¸€ä¸ªè‡ªå·±æ„Ÿè§‰è¿˜ç®—æ¯”è¾ƒæ»¡æ„çš„é¡¹ç›®ï¼Œä¸€ä¸‹å­æ„Ÿè§‰è‡ªå·±ç¦»å¤§ç¥çš„è·ç¦»åˆè¿‘äº†ä¸€ç‚¹ï¼ˆğŸ˜†ï¼‰ã€‚æˆ‘æ˜¯çœŸçš„æå…¶è®¨åŒâ€œå¤§ç¥â€è¿™ä¸ªè¯ï¼Œç¬¬ä¸€ä¸ªåŸå› æ˜¯çœ‹è¿‡å¤ªå¤šæ‰€è°“çš„å¤§ç¥å…¶å®åªæ˜¯è²Œä¼¼æˆ–è€…è¯´æ˜¯è¢«åˆ«äººå¹å‡ºæ¥çš„ï¼Œå†è¯´è¿™ä¸ªé¢†åŸŸæœ¬æ¥å°±æ²¡æœ‰å¤šå°‘çœŸæ­£å¤§ç¥ï¼Œæˆ‘æš‚æ—¶æ˜¯è¿™ä¹ˆæƒ³çš„ï¼Œå¯èƒ½å› ä¸ºæˆ‘çš„çœ¼ç•Œè¿˜å¤ªçª„ï¼Œä½ ä¸å¯èƒ½ä»€ä¹ˆéƒ½ä¼šï¼Œå°±ç®—ä½ ä¼šçš„å¾ˆå¤šä½ ä¹Ÿåº”è¯¥è°¦è™šä¸€ç‚¹ï¼Œæ‰€ä»¥æˆ‘è¦è°¦è™šä¸€ç‚¹ğŸ˜€ã€‚</p><p>ç”¨æˆ‘å‰é˜µå­éå¸¸å–œæ¬¢è¯´çš„è¯ï¼Œå°±æ˜¯å­¦ä¹ ç¼–ç¨‹è·Ÿå­¦ä¹ è‹±è¯­å…¶å®æ²¡ä»€ä¹ˆä¸¤æ ·ï¼Œä½ å­¦äº†ä½ å°±ä¼šäº†ï¼Œä½ çœ‹è¿‡ä¸€æ ·ä¸œè¥¿å¹¶ä¸”å»ç»ƒä¹ äº†ä½ è‡ªç„¶ä¹Ÿå°±ä¼šäº†ï¼Œæ²¡ä»€ä¹ˆå¤©èµ‹ä¹‹ç±»çš„ï¼ˆè¿™ä¹Ÿæ˜¯æˆ‘æš‚æ—¶çš„æƒ³æ³•ï¼‰ï¼Œåªæœ‰ä½ æœ‰æ²¡æœ‰å…´è¶£ï¼</p><p>æˆ‘éƒ½ä¸çŸ¥é“æˆ‘è¦ä¸è¦åšè¿™ç§ç¨‹åºå‘˜å·¥ä½œï¼Œå…´è¶£æˆ‘æ˜¯æœ‰çš„ï¼Œä¸ç„¶ä¹Ÿä¸ä¼šæŠ•å…¥åˆ°è¿åƒé¥­ä¸Šå•æ‰€çš„æ—¶é—´éƒ½å¿˜è®°äº†ï¼Œä½†æœ‰æ—¶çœŸçš„æ˜¯è§‰å¾—æˆ‘ä¸æƒ³åšè¿™ç§åŠå…¬å®¤å†œæ°‘,æå…¶è¿èƒŒæˆ‘çš„æœ¬æ„ï½ï½æˆ‘çš„æœ¬æ„å…¶å®å¯èƒ½æ˜¯èƒ½æœ‰ä¸åŠ³è€Œè·ï¼ŒæŠŠæ¢¦é‡Œæƒ³çš„ç›´æ¥å˜ç°çš„ä¸œè¥¿ã€‚</p><hr><h2 id="çŸ¥è¯†ç‚¹"><a href="#çŸ¥è¯†ç‚¹" class="headerlink" title="çŸ¥è¯†ç‚¹"></a>çŸ¥è¯†ç‚¹</h2><h3 id="å¹¿æ’­ï¼ˆBroadcastï¼‰"><a href="#å¹¿æ’­ï¼ˆBroadcastï¼‰" class="headerlink" title="å¹¿æ’­ï¼ˆBroadcastï¼‰"></a>å¹¿æ’­ï¼ˆBroadcastï¼‰</h3><h4 id="æ¥æ”¶å¹¿æ’­ï¼ˆBroadReceiverï¼‰"><a href="#æ¥æ”¶å¹¿æ’­ï¼ˆBroadReceiverï¼‰" class="headerlink" title="æ¥æ”¶å¹¿æ’­ï¼ˆBroadReceiverï¼‰"></a>æ¥æ”¶å¹¿æ’­ï¼ˆBroadReceiverï¼‰</h4><p>çœ‹å‰é¢ä¸¤å°èŠ‚ï¼Œé€šä¿—çš„ç†è§£ä¹Ÿä¸è¿‡æ˜¯ç›‘å¬äº†æŸæŸäº‹ä»¶ï¼ˆæ¯”å¦‚ç½‘ç»œæ˜¯å¦è¿æ¥ï¼‰ï¼Œä¹‹åå‘ç”Ÿä¸€ä¸ªåŠ¨ä½œã€‚</p><p>ç½‘ç»œå˜åŒ–è¿™ä¸ªå¹¿æ’­é€šè¿‡<code>IntentFilter</code>çš„<code>addAction</code>æ–¹æ³•æ‹¿åˆ°ï¼Œç„¶åé€šè¿‡<code>regosterReceiver</code>æ–¹æ³•å°†è¯¥å¹¿æ’­å’Œæˆ‘ä»¬è‡ªå®šä¹‰çš„å¹¿æ’­æ¥æ”¶å™¨ç»‘å®šèµ·æ¥ã€‚</p><p>è¿™é‡Œçš„å¹¿æ’­ç•Œæ¥æ”¶å™¨<code>regosterReceiver</code>å°±æ˜¯æˆ‘ä»¬å†™çš„ä¸€ä¸ªç±»ï¼Œå¹¿æ’­å‘å‡ºæ¥ä¹‹åï¼Œæˆ‘ä»¬çš„ç±»å®ä¾‹åŒ–å‡ºæ¥çš„å¯¹è±¡çš„<code>onReceive</code>æ–¹æ³•ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼Œè¿™é‡Œæˆ‘ä»¬æƒ³å¹²å˜›å°±å¹²å˜›äº†ã€‚</p><h4 id="å‘é€å¹¿æ’­"><a href="#å‘é€å¹¿æ’­" class="headerlink" title="å‘é€å¹¿æ’­"></a>å‘é€å¹¿æ’­</h4><p>æ–¹æ³•ç±»ä¼¼äºæ‰“å¼€å¦ä¸€ä¸ª<code>Activity</code>ï¼Œç”¨çš„æ˜¯<code>intent</code>å®ä¾‹åŒ–çš„æ—¶å€™å°†è‡ªå®šä¹‰çš„å¹¿æ’­ä¼ å…¥å‚æ•°ï¼Œç„¶åè°ƒç”¨<code>sendBroadcast</code>æ–¹æ³•ã€‚</p><p>å…¶ä»–çš„å°±æ˜¯å…‰æ³¢å¯ä»¥è·¨åº”ç”¨ç¨‹åºä¼ æ’­ï¼ˆå½“ç„¶ï¼Œæœ‰æ—¶ä¸ºäº†å®‰å…¨å¯ä»¥ä½¿ç”¨æœ¬åœ°å¹¿æ’­ï¼‰ï¼Œæœ‰åºå¹¿æ’­å¯ä»¥è®¾ç½®ä¼˜å…ˆæƒé€‰æ‹©é‚£ä¸ªæ¥æ”¶è€…å…ˆæ‰§è¡Œ</p><h4 id="æœ€ä½³å®è·µ"><a href="#æœ€ä½³å®è·µ" class="headerlink" title="æœ€ä½³å®è·µ"></a>æœ€ä½³å®è·µ</h4><p>è¿™æœ¬ä¹¦æ¯”è¾ƒå¥½çš„å°±æ˜¯æ¯ä¸€ä¸ªç« èŠ‚çš„æœ€ä½³å®è·µï¼ŒçŸ¥è¯†ç‚¹å…¨é¢è€Œä¸”æœ‰ç‚¹éš¾åº¦ã€å®è·µæ€§æ¯”è¾ƒå¤§ã€‚</p><p>è¿™ä¸€ç« æ˜¯å®ç°Appç™»é™†åå‘é€å¹¿æ’­å¼ºåˆ¶é€€å‡ºç™»é™†çš„åŠŸèƒ½ï¼Œè¿™é‡Œä¸å¤šè¯´äº†ï½</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;è¯»ä¹¦æ„Ÿå—&quot;&gt;&lt;a href=&quot;#è¯»ä¹¦æ„Ÿå—&quot; class=&quot;headerlink&quot; title=&quot;è¯»ä¹¦æ„Ÿå—&quot;&gt;&lt;/a&gt;è¯»ä¹¦æ„Ÿå—&lt;/h2&gt;&lt;p&gt;æœ¬ç€æŸ¥æ¼è¡¥ç¼ºçš„æ€åº¦ï¼Œåˆšæ¥å­¦æ ¡éšæ‰‹æ‹¿åˆ°ä¸€æœ¬ä¹¦çœ‹äº†èµ·æ¥ï¼Œå°±è¿™ä¹ˆä¸€ä¸‹å­çœ‹å®Œäº†ï¼Œæœ‰ä¸€ä¸ªæ„Ÿè§‰ï¼ŒæŠ€æœ¯ä¹‹ç±»çš„ä¹¦è¿˜è¦æ˜¯æœ‰ç‚¹åŸºç¡€çœ‹çš„ï¼Œä¸ä»…æ•ˆç‡
      
    
    </summary>
    
      <category term="åŸåˆ›" scheme="https://meandni.com/categories/%E5%8E%9F%E5%88%9B/"/>
    
    
      <category term="android" scheme="https://meandni.com/tags/android/"/>
    
      <category term="è¯»ä¹¦" scheme="https://meandni.com/tags/%E8%AF%BB%E4%B9%A6/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="https://meandni.com/2018/08/14/3eeb/"/>
    <id>https://meandni.com/2018/08/14/3eeb/</id>
    <published>2018-08-14T03:27:16.000Z</published>
    <updated>2018-08-15T01:02:49.000Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><p>åšå®¢è¿è‡³Hexoï¼Œæ‰˜ç®¡åœ¨GitHubä¸Šï¼Œä»¥åå¯ä»¥å¼€å§‹èˆ’é€‚çš„å­¦ä½œä¹‹æ—…äº†ï½</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
      
    
    </summary>
    
    
  </entry>
  
</feed>
